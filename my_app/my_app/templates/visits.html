<!DOCTYPE html>

<html lang="en">


<head>
    {% block css %}
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"> {% endblock css %}


    <style>
        body {
            font-family: Helvetica;
            background: rgb(79, 195, 161);
        }
        
        .register {
            display: flex;
            flex-direction: row;
            margin-left: 950px;
        }
        
        .home {
            margin-left: 650px;
        }
        
        h2 {
            text-align: center;
            color: rgb(248, 245, 245);
            font-family: Arial;
            font-size: 30px;
        }
        
        .warpper {
            display: flex;
        }
        
        .tab {
            cursor: pointer;
            text-align: center;
            padding: 10px 0px;
            margin: 0px 5px;
            background: rgb(50, 74, 98);
            display: inline-block;
            color: rgb(255, 255, 255);
            border-radius: 5px;
            box-shadow: 0rem 0rem 0.1rem 0.1rem #d14444f1;
        }
        
        #name {
            text-align: center;
            color: rgb(102, 67, 228);
            font-size: 23px;
        }
        
        .tabs {
            display: flex;
            flex-direction: column;
            margin-right: 10px;
        }
        
        .panels {
            background: #fffffff6;
            height: 1000px;
            width: 95%;
            border-radius: 3px;
            overflow: hidden;
            padding: 20px;
        }
        
        .panel {
            display: none;
            animation: fadein .8s;
        }
        
        .radio {
            display: none;
        }
        
        #one:checked~.panels #one-panel,
        #two:checked~.panels #two-panel {
            display: block
        }
        
        #one:checked~.tabs #one-tab,
        #two:checked~.tabs #two-tab {
            background: #fffffff6;
            color: #000;
        }
        /*=================== patient list =========== */
        
        .patientList {
            margin: 10px;
        }
        
        .patients {
            border: 1px solid black;
            margin-left: 10px;
            font-size: 18px;
            border-collapse: collapse;
            width: 80%;
            background-color: white;
        }
        
        table {
            border: 1px solid black;
            margin-left: 10px;
            font-size: 18px;
            border-collapse: collapse;
            width: 100%;
            background-color: white;
        }
        
        td,
        th {
            border: 1px solid black;
            text-align: center;
            padding: 10px;
            font-size: 18px;
        }
        
        thead th {
            color: #1f1919;
            background: rgb(79, 195, 161);
        }
        
        thead th:nth-child(odd) {
            color: #ffffff;
            background: rgb(50, 74, 98);
        }
        /* ============= end Patient list =================*/
        /* =============  button ========================= */
        
        .button {
            border: none;
            color: black;
            padding: 15px 32px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
        }
        
        .button1 {
            background-color: rgb(50, 74, 98);
            color: white;
            border: 1px solid #4CAF50;
            margin-top: 520px;
            /*margin-right: 10px;*/
        }
        
        .button1:hover {
            background-color: red;
            /*rgb(91, 79, 195)*/
            color: white;
        }
        /* ============= end button ========================= */
    </style>
</head>

<title>Visits List</title>
<link rel="icon" href="https://st2.depositphotos.com/3616015/5350/v/600/depositphotos_53506147-stock-illustration-syringe-flat-icon-with-long.jpg">

<body>

    {% block javascript %}
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.1/js/materialize.min.js" integrity="sha256-SrBfGi+Zp2LhAvy9M1bWOCXztRU9Ztztxmu5BcYPcPE=" crossorigin="anonymous"></script>

    <script>
        $(document).ready(function() {

            // Initialize materialize data picker
            $('.datepicker').datepicker({
                'format': 'yyyy-mm-dd'
            });
            $('select').formSelect();

        });
    </script>
    {% endblock javascript %}


    <script type="text/javascript">
        function createCookie(cookieName, cookieValue, daysToExpire) {
            var date = new Date();
            date.setTime(date.getTime() + (daysToExpire * 10));
            document.cookie = cookieName + "=" + cookieValue + "; expires=" + date.toGMTString();
        }

        function accessCookie(cookieName) {
            var name = cookieName + "=";
            var allCookieArray = document.cookie.split(';');
            for (var i = 0; i < allCookieArray.length; i++) {
                var temp = allCookieArray[i].trim();
                if (temp.indexOf(name) === 0)
                    return temp.substring(name.length, temp.length);
            }
            return "";
        }

        function checkCookie() {
            var user = accessCookie("testCookie");
            // if (user !== "")
            //     alert("Welcome Back " + user + "!!!");
        }

        function dashboard() {

            window.location.href = "http://127.0.0.1:8000/visits"
        }

        function login() {

            window.location.href = "http://127.0.0.1:8000/login/"

        }

        function logout() {

            window.location.href = "http://127.0.0.1:8000/logout/"
        }

        checkCookie();
    </script>
    {% if nurse %}
    <div class="register">
        <h2>LabCov19</h2>
        <a class="home" href="http://127.0.0.1:8000"><img src="https://img.icons8.com/dusk/48/000000/home.png"></a>
    </div>
    <div class="warpper">
        <input class="radio" id="one" name="group" type="radio" checked>
        <input class="radio" id="two" name="group" type="radio">
        <div class="tabs">
            <img src="https://www.shareicon.net/data/512x512/2016/08/18/813855_people_512x512.png" alt="Nurse" style="width:200px">
            <p id="name">{{nurse.username}}</p>
            <label class="tab" id="one-tab" for="one">Patient list</label>
            <label class="tab" id="two-tab" for="two">Patient results</label>
            <input class="button button1" type="button" onclick="logout()" value="Logout" align="right">
        </div>
        <div class="panels">
            <div class="panel" id="one-panel">
                <div class="patientList">
                    <table>
                        <thead>
                            <tr>
                                <th>First name</th>
                                <th>Last name</th>
                                <th>Date of birth</th>
                                <th>Gender</th>
                                <th>Email</th>
                                <th>Number</th>
                                <th>Date</th>
                                <th>Vaccine</th>
                            </tr>
                            <tbody>
                                {% for i in visits %}
                                <tr>
                                    <td>{{i.first_name}}</td>
                                    <td>{{i.last_name}}</td>
                                    <td>{{i.date_of_birth}}</td>
                                    <td>{{i.gender}}</td>
                                    <td>{{i.email}}</td>
                                    <td>{{i.phone_number}}</td>
                                    <td>{{i.date}}</td>
                                    <td>{{i.do_you_want_vaccine}}</td>
                                </tr>
                                {% endfor %}
                    </table>
                </div>
            </div>
            <div class="panel" id="two-panel">
                <div class="patientList">
                    <table class=patients>
                        <thead>
                            <tr>
                                <th>First name</th>
                                <th>Last name</th>
                                <th>Email</th>
                                <th>Date</th>
                                <th>Completed visits</th>
                            </tr>
                            <tbody>
                                {% for i in visits %}
                                <tr>
                                    <td>{{i.first_name}}</td>
                                    <td>{{i.last_name}}</td>
                                    <td>{{i.email}}</td>
                                    <td>{{i.date}}</td>
                                    <td>
                                        <form action="" method="get">
                                            <input type="submit" name="{{i.email}}" value="Send mail">
                                        </form>

                                    </td>
                                </tr>
                                {% endfor %}
                    </table>
                </div>
            </div>
        </div>
    </div>
    {% else %}
    <script>
        login();
    </script>{% endif %}
</body>

</html>